# Elder Care MVP

ä¸€å€‹ç”¨æ–¼é•·è€…ç…§è­·çš„ä½ç½®è¿½è¹¤ç³»çµ±ï¼Œæä¾›å³æ™‚ä½ç½®æ›´æ–°å’Œè³‡æ–™åº«ç®¡ç†åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹è‰²

- **å³æ™‚ä½ç½®æ›´æ–°**: æ¯ç§’æ›´æ–°ä½¿ç”¨è€…ä½ç½®åº§æ¨™
- **å¹³æ»‘ç§»å‹•è»Œè·¡**: æ¨¡æ“¬çœŸå¯¦çš„å®¤å…§ç§»å‹•è¡Œç‚º
- **RESTful API**: æä¾›å®Œæ•´çš„ä½ç½®è³‡æ–™å­˜å–ä»‹é¢
- **è³‡æ–™åº«ç®¡ç†**: ä½¿ç”¨ PostgreSQL å’Œ Alembic é€²è¡Œè³‡æ–™ç®¡ç†
- **Docker æ”¯æ´**: å®¹å™¨åŒ–éƒ¨ç½²æ”¯æ´

## ğŸ“‹ ç³»çµ±éœ€æ±‚

- Python 3.12+
- PostgreSQL è³‡æ–™åº«
- uv (Python å¥—ä»¶ç®¡ç†å™¨)

## ğŸ› ï¸ å®‰è£è¨­ç½®

### 1. å…‹éš†å°ˆæ¡ˆ

```bash
git clone <your-repository-url>
cd elder_care_mvp
```

### 2. å®‰è£ä¾è³´

```bash
uv sync
```

### 3. ç’°å¢ƒè®Šæ•¸è¨­ç½®

ç¢ºä¿ä½ çš„ PostgreSQL è³‡æ–™åº«é€£æ¥å­—ä¸²æ­£ç¢ºè¨­ç½®åœ¨ `app/data/__init__.py` ä¸­ï¼š

```python
engine = create_engine("postgresql://username:password@host:port/database")
```

## ğŸƒâ€â™‚ï¸ é‹è¡Œæ‡‰ç”¨ç¨‹å¼

### æœ¬åœ°é–‹ç™¼

```bash
# å•Ÿå‹•æ‡‰ç”¨ç¨‹å¼
uv run python -m app.main
```

### ä½¿ç”¨ Docker

```bash
# å»ºç½® Docker æ˜ åƒ
docker build -t elder-care-mvp .

# é‹è¡Œå®¹å™¨
docker run -p 8000:8000 elder-care-mvp
```

## ğŸ“Š API ç«¯é»

### åŸºç¤ç«¯é»

- `GET /` - æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹
- `GET /health` - å¥åº·æª¢æŸ¥

### ä½¿ç”¨è€…ä½ç½® API

- `GET /api/v1/user/` - ç²å–æ‰€æœ‰ä½¿ç”¨è€…ä½ç½®ï¼ˆå³æ™‚æ›´æ–°ï¼‰
- `POST /api/v1/user/start-updates` - å•Ÿå‹•ä½ç½®æ›´æ–°æœå‹™
- `POST /api/v1/user/stop-updates` - åœæ­¢ä½ç½®æ›´æ–°æœå‹™
- `GET /api/v1/user/update-status` - æŸ¥çœ‹æ›´æ–°æœå‹™ç‹€æ…‹

### ä½¿ç”¨ç¯„ä¾‹

```bash
# ç²å–å³æ™‚ä½ç½®è³‡æ–™
curl http://localhost:8000/api/v1/user/

# æŸ¥çœ‹æ›´æ–°ç‹€æ…‹
curl http://localhost:8000/api/v1/user/update-status

# æ§åˆ¶æ›´æ–°æœå‹™
curl -X POST http://localhost:8000/api/v1/user/stop-updates
curl -X POST http://localhost:8000/api/v1/user/start-updates
```

## ğŸ—„ï¸ è³‡æ–™åº«ç®¡ç†

### åˆå§‹è¨­ç½®

æ‡‰ç”¨ç¨‹å¼å•Ÿå‹•æ™‚æœƒè‡ªå‹•å‰µå»ºå¿…è¦çš„è³‡æ–™åº«è¡¨æ ¼ã€‚

### ä½¿ç”¨ Alembic ç®¡ç†é·ç§»

#### æª¢æŸ¥é·ç§»ç‹€æ…‹

```bash
uv run alembic current
```

#### å‰µå»ºæ–°é·ç§»

```bash
uv run alembic revision --autogenerate -m "æè¿°ä½ çš„è®Šæ›´"
```

#### æ‡‰ç”¨é·ç§»

```bash
uv run alembic upgrade head
```

#### å›æ»¾é·ç§»

```bash
uv run alembic downgrade -1
```

#### æŸ¥çœ‹é·ç§»æ­·å²

```bash
uv run alembic history
```

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
elder_care_mvp/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ data/              # è³‡æ–™åº«æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ __init__.py    # è³‡æ–™åº«é€£æ¥
â”‚   â”‚   â””â”€â”€ user_info.py   # ä½¿ç”¨è€…è³‡æ–™æ“ä½œ
â”‚   â”œâ”€â”€ fake/              # æ¨¡æ“¬è³‡æ–™
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ location.py    # ä½ç½®è³‡æ–™
â”‚   â”‚   â””â”€â”€ user_info.py   # ä½¿ç”¨è€…è³‡æ–™
â”‚   â”œâ”€â”€ model/             # è³‡æ–™æ¨¡å‹
â”‚   â”‚   â””â”€â”€ user_info.py   # UserInfo æ¨¡å‹
â”‚   â”œâ”€â”€ service/           # æ¥­å‹™é‚è¼¯
â”‚   â”‚   â”œâ”€â”€ location_updater.py  # ä½ç½®æ›´æ–°æœå‹™
â”‚   â”‚   â””â”€â”€ user_info.py   # ä½¿ç”¨è€…æœå‹™
â”‚   â”œâ”€â”€ web/               # Web API
â”‚   â”‚   â””â”€â”€ user_info.py   # ä½¿ç”¨è€… API è·¯ç”±
â”‚   â””â”€â”€ main.py            # æ‡‰ç”¨ç¨‹å¼å…¥å£
â”œâ”€â”€ alembic/               # è³‡æ–™åº«é·ç§»
â”‚   â”œâ”€â”€ versions/          # é·ç§»æª”æ¡ˆ
â”‚   â”œâ”€â”€ env.py             # é·ç§»ç’°å¢ƒé…ç½®
â”‚   â””â”€â”€ script.py.mako     # é·ç§»æ¨¡æ¿
â”œâ”€â”€ alembic.ini            # Alembic é…ç½®
â”œâ”€â”€ pyproject.toml         # å°ˆæ¡ˆé…ç½®
â”œâ”€â”€ Dockerfile             # Docker é…ç½®
â””â”€â”€ README.md              # å°ˆæ¡ˆèªªæ˜
```

## ğŸ”§ é…ç½®èªªæ˜

### ä½ç½®ç¯„åœè¨­å®š

åœ¨ `app/service/location_updater.py` ä¸­å¯ä»¥èª¿æ•´ä½ç½®ç¯„åœï¼š

```python
self.x_range = (1.0, 66.93)      # X åº§æ¨™ç¯„åœ
self.z_range = (-11.84, 25.3)    # Z åº§æ¨™ç¯„åœ
self.y_value = 0.0               # Y åº§æ¨™ï¼ˆå›ºå®šå€¼ï¼‰
```

### ç§»å‹•é€Ÿåº¦è¨­å®š

```python
self._movement_speed = 0.5  # ç§»å‹•é€Ÿåº¦ï¼ˆå¼§åº¦/ç§’ï¼‰
```

## ğŸš€ éƒ¨ç½²åˆ° Render

### 1. é€£æ¥ GitHub å€‰åº«

åœ¨ Render ä¸­é€£æ¥ä½ çš„ GitHub å€‰åº«ã€‚

### 2. è¨­ç½®éƒ¨ç½²é…ç½®

- **Name**: `elder_care_mvp`
- **Language**: `Docker`
- **Branch**: `main`
- **Region**: é¸æ“‡é©åˆçš„åœ°å€
- **Root Directory**: ä¿æŒç©ºç™½ï¼ˆä½¿ç”¨æ ¹ç›®éŒ„ï¼‰

### 3. ç’°å¢ƒè®Šæ•¸

ç¢ºä¿åœ¨ Render ä¸­è¨­ç½®æ­£ç¢ºçš„è³‡æ–™åº«é€£æ¥å­—ä¸²ã€‚

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ

1. **è³‡æ–™åº«é€£æ¥éŒ¯èª¤**

   - æª¢æŸ¥ PostgreSQL é€£æ¥å­—ä¸²
   - ç¢ºèªè³‡æ–™åº«æœå‹™æ­£åœ¨é‹è¡Œ

2. **Alembic é·ç§»å•é¡Œ**

   - ç¢ºä¿ `alembic.ini` ä¸­çš„è³‡æ–™åº« URL æ­£ç¢º
   - æª¢æŸ¥ `alembic/env.py` ä¸­çš„æ¨¡å‹å°å…¥

3. **ä½ç½®æ›´æ–°ä¸å·¥ä½œ**
   - æª¢æŸ¥ `location_updater` æœå‹™æ˜¯å¦æ­£å¸¸å•Ÿå‹•
   - æŸ¥çœ‹æ‡‰ç”¨ç¨‹å¼æ—¥èªŒ

### æ—¥èªŒæª¢æŸ¥

```bash
# æŸ¥çœ‹æ‡‰ç”¨ç¨‹å¼æ—¥èªŒ
uv run python -m app.main

# æª¢æŸ¥è³‡æ–™åº«é€£æ¥
uv run alembic current
```

## ğŸ“ é–‹ç™¼æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨ `app/model/` ä¸­å®šç¾©è³‡æ–™æ¨¡å‹
2. åœ¨ `app/service/` ä¸­å¯¦ç¾æ¥­å‹™é‚è¼¯
3. åœ¨ `app/web/` ä¸­æ·»åŠ  API è·¯ç”±
4. ä½¿ç”¨ Alembic å‰µå»ºè³‡æ–™åº«é·ç§»

### ä»£ç¢¼é¢¨æ ¼

- ä½¿ç”¨è‹±æ–‡è¨»è§£
- éµå¾ª PEP 8 ä»£ç¢¼é¢¨æ ¼
- æ·»åŠ é©ç•¶çš„é¡å‹æç¤º

## ğŸ“„ æˆæ¬Š

æœ¬å°ˆæ¡ˆåƒ…ä¾›å­¸ç¿’å’Œé–‹ç™¼ä½¿ç”¨ã€‚

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

---

**æ³¨æ„**: è«‹ç¢ºä¿åœ¨ç”Ÿç”¢ç’°å¢ƒä¸­è¨­ç½®é©ç•¶çš„å®‰å…¨æªæ–½å’Œç’°å¢ƒè®Šæ•¸ã€‚
